<!--
 Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 The Universal Permissive License (UPL), Version 1.0
-->
<div class="oj-panel oj-margin">
    <h3 class="oj-header-border">Evaluaciones grupales</h3>
    <div class="oj-form-layout">
        <div class="oj-form">
            <oj-toolbar id='barra-consulta' aria-label='Barra de consulta' aria-controls='controlled'>
                <oj-label id="etiqueta-rangos" class="componente-barra" for="desde">Rango de fechas:</oj-label>
                <oj-input-date id="desde" class="componente-barra" value={{valorDesde}}>
                </oj-input-date>
                <oj-input-date id="hasta" class="componente-barra" value={{valorHasta}} min="[[valorDesde]]" max="[[funcionTecho(valorDesde)]]">
                </oj-input-date>
                <oj-button id="btn-consulta-rangos" class="componente-barra boton-barra" on-oj-action="[[actualizarDatos]]">Buscar</oj-button>
                <span role="separator" aria-orientation="vertical" class="oj-toolbar-separator"></span>
                <oj-menu-button id="btn-menu-escuelas" class="componente-barra boton-barra">
                    Escuela
                    <oj-menu id="menu-escuelas" slot="menu" style="display:none" on-oj-action="[[cambioEscuela]]">
                        <!-- ko foreach: escuelas -->
                        <oj-option data-bind="attr: {id: value, value: value}">
                          <span data-bind="text: label"></span>
                        </oj-option>
                        <!-- /ko -->
                      </oj-menu>
                  </oj-menu-button>
                  <oj-button display='icons'>
                    <span slot='startIcon' class="demo-grid-icon-16 demo-icon-font-24"></span>
                    Descargar Excel
                  </oj-button>
            </oj-toolbar>
        </div>
        <div class="oj-form oj-sm-odd-cols-12 oj-md-odd-cols-4 oj-md-labels-inline" align="center">
            <oj-accordion>
                <oj-collapsible id="colapsable-escolar" expanded="true">
                    <h3 slot="header">Evaluación escolar</h3>
                    <oj-label-inline for="seleccionadorEscuela">Selecciona una escuela:</oj-label-inline>
                    <oj-select-one style="width: 500px;" id="seleccionadorEscuela" options="[[origenDatosEscuelas]]" value="{{escuelaSeleccionada}}"></oj-select-one> 
                    <oj-button style="padding-left: 5px;" id="generarGraficaEscuela" on-oj-action="[[generarGraficaEscuela]]">Generar grafica</oj-button>
                    <oj-button style="padding-left: 5px;" id="descargarPDFEscuelas" onclick="return descargarPDF('graficaEscuela', 'Porcentajes por Escuela')">Exportar PDF</oj-button>
                    <oj-button style="padding-left: 5px;" id="descargarExcelEscuelas">Exportar Excel</oj-button>
                    <div id='chart-container'>
                        <oj-chart id="graficaEscuela"
                                  type="pie" 
                                  data="[[porcentajesEscuelas]]"
                                  animation-on-display="auto"
                                  animation-on-data-change="auto"
                                  hover-behavior="dim"
                                  style="max-width:500px;width:100%;height:350px;">

                            <template slot='itemTemplate' data-oj-as='item'>
                                <oj-chart-item 
                                    value='[[item.data.valor]]'
                                    group-id='[[ [item.data.escuela] ]]'
                                    series-id='[[item.data.serie]]'> 
                                </oj-chart-item>
                            </template>
                        </oj-chart>
                    </div>
                </oj-collapsible>
                <oj-collapsible id="colapsable-grupal">
                    <h3 slot="header">Evaluación grupal</h3>
                    <oj-label-inline for="seleccionadorEscuela">Selecciona un grupo:</oj-label-inline>
                    <oj-select-one style="width: 500px;" id="seleccionadorEscuelaGrupo" on-value-changed="[[cambioEscuela]]" options="[[origenDatosEscuelas]]"></oj-select-one> 
                    <oj-select-one style="padding-left: 5px; width: 150px;" id="seleccionadorGrupo" options="[[origenDatosGrupos]]"></oj-select-one> 
                    <oj-button style="padding-left: 5px;" id="generarGraficaEscuela" on-oj-action="[[generarGraficaGrupo]]">Generar grafica</oj-button>
                    <oj-button style="padding-left: 5px;" id="descargarPDFGrupos" onclick="return descargarPDF('graficaGrupo', 'Porcentajes por Grupo')">Exportar PDF</oj-button>
                    <oj-button style="padding-left: 5px;" id="descargarExcelGrupos">Exportar Excel</oj-button>
                    <div id='chart-container'>
                        <oj-chart id="graficaGrupo"
                                  type="pie" 
                                  data="[[porcentajesGrupos]]"
                                  animation-on-display="auto"
                                  animation-on-data-change="auto"
                                  hover-behavior="dim"
                                  style="max-width:500px;width:100%;height:350px;">

                            <template slot='itemTemplate' data-oj-as='item'>
                                <oj-chart-item 
                                    value='[[item.data.valor]]'
                                    group-id='[[ [item.data.escuela] ]]'
                                    series-id='[[item.data.serie]]'> 
                                </oj-chart-item>
                            </template>
                        </oj-chart>
                    </div>
                </oj-collapsible>
            </oj-accordion>
        </div>
    </div>
</div>
